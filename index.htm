<html xmlns="http://www.w3.org/1999/xhtml"> 
  <head> 
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/> 
    <title>Share your Pandora stations on your website</title> 
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript"> 
 
    google.load("feeds", "1");
    
    /**
    /* edit your username here
     */
    var username = 'jane';


    /**
    /* facebook share url
     */
    var fbsurl = 'http://www.facebook.com/sharer.php?&u=';
    var topic = 'I%27m+listening+to%20';
    var ahrf = '&nbsp;<a href=';
    var bhrf = '">facebook</a>';

    var googurl = 'http://www.google.com/reader/link?url=';
    var ghrf = '">google</a>';
    

	function getname(){
		var nm = document.getElementById("nm");
		return nm.value;
	}

     function init(name) {
      

        var feed = new google.feeds.Feed("http://feeds.pandora.com/feeds/people/"+escape(name)+"/stations.xml");
        feed.load(function(result) {
        if (!result.error) {
          var container = document.getElementById("feed");
          for (var i = 0; i < result.feed.entries.length; i++) {
            var entry = result.feed.entries[i];
            var div = document.createElement("div");
            div.appendChild(document.createTextNode(entry.title));
	    var span1 = document.createElement("span");
	    span1.innerHTML = ahrf + fbsurl + entry.link + '&t=' + topic + bhrf;
	    div.appendChild(span1);
	    var span2 = document.createElement("span");
	    span2.innerHTML = ahrf + googurl + entry.link + '&title=' + topic + entry.title  + ghrf;
            div.appendChild(span2);
            container.appendChild(div);
          }
        }
      });
    }
 
    </script> 
  </head> 
  <body> 
	<div id="content" style="margin-left:100px;">

	<h2>Pandora radio script</h2>

			     <br/>
			     <br/>

	Share your Pandora radio stations from your website using this script<br/>
									    <br/>	
        Demo<br/>
	<input id = "nm" type="text" value="Enter your Pandora username here"></text><br/>
	<input type="button" value="ok" onclick="init(getname());"><br/><br/>

	<div style="border:2px solid blue; width:350px;padding:5px;">
	I'm currently listening to ...<br/>
    <div id="feed"></div> 
	</div>

	<br/>
        <a href='http://github.com/budu3/pandora_script/blob/master/pandora_script.js'>Download pandora script</a><br/>
	requires - <a href='http://www.google.com/jsapi'>http://www.google.com/jsapi</a>
	</div>

  </body> 
</html> 
